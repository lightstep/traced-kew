{"version":3,"sources":["../../src/examples/example-delays.js"],"names":[],"mappings":";;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAJA;AAMA,QAAQ,oBAAR,EAA8B,OAA9B;;AAEA;AACA;AACA;AACA,sBAAY,gBAAZ,CAA6B,0BAAU,MAAV,CAAiB;AAC1C,kBAAiB,qBADyB;AAE1C,oBAAiB,2BAFyB;AAG1C,oBAAiB,WAHyB;AAI1C,oBAAiB,IAJyB;AAK1C,0BAAuB;AALmB,CAAjB,CAA7B;;AASA,sBAAY,GAAZ,GAAkB,EAAlB,CAAqB,QAArB,EAA+B,UAAC,MAAD,EAAY;AACvC,YAAQ,IAAR,EAAc,aAAd,CAA4B,iBAA5B,EAA+C,KAAK,SAAL,CAAe,OAAO,YAAtB,EAAoC,IAApC,EAA0C,CAA1C,CAA/C;AACH,CAFD;;AAIA,SAAS,IAAT,CAAc,GAAd,EAAmB,IAAnB,EAAyB;AACrB,QAAI,GAAJ,EAAS;AACL,cAAM,GAAN;AACH;AACD,QAAM,MAAM,KAAK,GAAL,GAAW,gBAAX,GAA8B,OAA9B,CAAsC,+BAAtC,EAAuE,wBAAvE,CAAZ;AACA,YAAQ,GAAR,CAAY,GAAZ;AACA,SAAK,MAAL;;AAEA,sBAAQ,IAAR,YAAsB,GAAtB;AACH;;AAED,WAAE,WAAF,CAAc,MAAd,EAAsB,IAAtB,EAA4B,CAA5B,EACK,IADL,CACU,YAAK;AACP,WAAO,WAAE,WAAF,CAAc,KAAd,EAAqB,IAArB,EAA2B,CAA3B,EACF,IADE,CACG;AAAA,eAAM,WAAE,WAAF,CAAc,GAAd,EAAmB,IAAnB,EAAyB,CAAzB,CAAN;AAAA,KADH,EAEF,IAFE,CAEG;AAAA,eAAM,WAAE,WAAF,CAAc,GAAd,EAAmB,IAAnB,EAAyB,CAAzB,CAAN;AAAA,KAFH,EAGF,IAHE,CAGG;AAAA,eAAM,WAAE,WAAF,CAAc,GAAd,EAAmB,IAAnB,EAAyB,CAAzB,CAAN;AAAA,KAHH,CAAP;AAIH,CANL,EAOK,IAPL,CAOU,YAAK;AACP,WAAO,WAAE,KAAF,CAAQ,EAAR,EACF,IADE,CACG;AAAA,eAAM,WAAE,KAAF,CAAQ,CAAR,CAAN;AAAA,KADH,EAEF,IAFE,CAEG;AAAA,eAAM,WAAE,KAAF,CAAQ,CAAR,CAAN;AAAA,KAFH,EAGF,IAHE,CAGG;AAAA,eAAM,WAAE,KAAF,CAAQ,CAAR,CAAN;AAAA,KAHH,CAAP;AAIH,CAZL,EAaK,UAbL,CAagB,UAAC,IAAD,EAAU;AAClB,SAAK,IAAL,EAAW,IAAX;AACH,CAfL,EAgBK,IAhBL,CAgBU,UAAC,GAAD,EAAS;AACX,SAAK,IAAI,KAAJ,CAAU,GAAV,CAAL;AACH,CAlBL","file":"example-delays.js","sourcesContent":["/* eslint-disable no-console, no-shadow, import/no-extraneous-dependencies */\nimport opentracing from 'opentracing';\nimport LightStep from 'lightstep-tracer';\nimport shelljs from 'shelljs';\nimport Q from '../..';\n\nrequire('source-map-support').install();\n\n//\n// Standard OpenTracing tracer initialization\n//\nopentracing.initGlobalTracer(LightStep.tracer({\n    access_token   : '{your_access_token}',\n    component_name : 'traced-kew/example-delays',\n    collector_host : 'localhost',\n    collector_port : 9998,\n    collector_encryption : 'none',\n}));\n\n\nopentracing.imp().on('report', (report) => {\n    require('fs').writeFileSync('temp/spans.json', JSON.stringify(report.span_records, null, 4));\n});\n\nfunction done(err, span) {\n    if (err) {\n        throw err;\n    }\n    const url = span.imp().generateTraceURL().replace(/https:\\/\\/app\\.lightstep\\.com/, 'http://localhost:10000')\n    console.log(url);\n    span.finish();\n\n    shelljs.exec(`open \"${url}\"`);\n}\n\nQ.tracedDelay('root', null, 2)\n    .then(()=> {\n        return Q.tracedDelay('ABC', null, 2)\n            .then(() => Q.tracedDelay('A', null, 2))\n            .then(() => Q.tracedDelay('B', null, 1))\n            .then(() => Q.tracedDelay('C', null, 4))\n    })\n    .then(()=> {\n        return Q.delay(15)\n            .then(() => Q.delay(2))\n            .then(() => Q.delay(1))\n            .then(() => Q.delay(4))\n    })\n    .tracedThen((span) => {\n        done(null, span);\n    })\n    .fail((err) => {\n        done(new Error(err));\n    });\n"]}